\documentclass[slides]{beamer} %switch "slides" to "handout" for printing out
%\documentclass[handout]{beamer}

\include{preamble}

%presentation preamble
\usetheme{progressbar}
\usecolortheme{progressbar} 
\usefonttheme{progressbar} 
\useoutertheme{progressbar}
\useinnertheme{progressbar}

\title[Missing Data in BART]{Predictive Analytics Lecture 1}
\institute[Wharton, Statistics]{Stat 422/722\\ at The Wharton School of the University of Pennsylvania}
\date{January 17 \& 18, 2017}

\author{Adam Kapelner}


\begin{document}

%immediately create a title page
\frame{\titlepage}

\section{Model Vocab}

\begin{frame}\frametitle{Define: Prediction and Forecast}

\qu{statement about an uncertain event}, \pause
\qu{informed guess or opinion} \\~\\

\textbf{predict (v.)} 1620s (implied in predicted), "\textit{foretell, prophesy}," a back formation from prediction or else from Latin praedicatus, past participle of praedicere "foretell, advise, give notice,"\\~\\

\textbf{forecast (n.)} early 15c., "\textit{forethought, prudence}," probably from forecast (v.). Meaning "conjectured estimate of a future course" is from 1670s. \\~\\

I will be using predict and forecast interchangeably.

\end{frame}


\begin{frame}\frametitle{Examples}

We make predictions all the time, saying things like: \\~\\

\begin{itemize}
\item \qu{Apple stock will go up tomorrow},
\item \qu{This condo will sell for \$500K}
\end{itemize}

and sometimes unknowingly

\begin{itemize}
\item \qu{Going skiing this weekend will make me happy}, \\~\\
\end{itemize}

How do we make predictions? \pause We use a \textit{model}.

\end{frame}

\begin{frame}\frametitle{Define: model}

\qu{a functional decription of a system}  \pause \\~\\ An example model is:

\begin{quotation}
Early to bed and early to rise makes a man healthy, wealthy and wise.
\end{quotation}

All models have \textbf{input(s)} and \textbf{output(s)}. In the model above, what are the... \\~\\

Inputs? \pause bedtime schedule, waking schedule, ... \\
Outputs? \pause health, wealth and wisdom \\~\\

\end{frame}


\begin{frame}\frametitle{Synonyms for Inputs and Outputs}

\small
Here, the inputs and outputs are 

\begin{itemize}
\item \textit{features} 
\item \textit{attributes} 
\item \textit{characteristics}
\item \textit{variables} / \textit{variates}
\end{itemize}

of a person. A person features health, a person has the characteristic of going to bed early. \\~\\


\end{frame}

\begin{frame}\frametitle{What are \qu{observations}?}

Here, we have features of a person. Generally, inputs and outputs are features of the 

\begin{itemize}
\item \textit{observation} or 
\item \textit{unit} or 
\item \textit{record} or 
\item \textit{subject}.
\end{itemize} 

%\ingray{Note: I will be using \qu{observation} or the name of the unit itself: \qu{person}, \qu{car}, etc.} Here, the observation is a person.

Thus the model relates some \textit{feature(s) of the observation} to other \textit{feature(s) of the observation}. Here, we are relating specific people's bedtime schedule and waking schedule to their health, wealth and wisdom.
\end{frame}






\begin{frame}\frametitle{Ambiguity of Models Defined by Words}

\small
Models phrased in language such as:

\begin{quotation}
Early to bed and early to rise makes a man healthy, wealthy and wise.
\end{quotation}

are usually ambiguous, imprecise, vague and ill-defined. Why? \pause 

\begin{itemize}
\item What does \qu{early to bed} mean? 
\item What does \qu{early to rise} mean? 
\item What does \qu{healthy} mean? 
\item What does \qu{wealthy} mean? 
\item What does \qu{wise} mean?
\end{itemize}

Without resolving these ambiguities, \pause the model is unusable and of course, untestable. \\~\\ \pause
\vspace{-0.3cm}

In order to make this precise and defined, there is a necessity to use numbers. \pause Thus, features of the observation must be \textit{measured} (to be defined later). \pause 
	
\end{frame}

\begin{frame}\frametitle{The Model as a Functional Relationship}

\small

Thus the model relates some \textit{measured feature(s) of the observation} to other \textit{measured feature(s) of the observation}. The relationship is a function taking in inputs (within the parentheses) and \qu{returning} the outputs (the equal sign). For any observation,

\beqn
\substack{\text{the measured} \\ \text{outputs of an} \\ \text{observation}} = \text{model}\parens{\substack{\text{the measured} \\ \text{inputs of an} \\ \text{observation}}}
\eeqn

\ingrey{It is traditional to put the outputs on the left hand side.} This is assumed that the outputs were measured. This type of observation is called 

\begin{itemize}
\item old or
\item historical or
\item known
\end{itemize}

and predictions here are not needed (obviously). In our aphorism model, for the observation being a known person named Joe:

\tiny 
\beqn
\threevec{\text{a measured quantity of Joe's health}}{\text{a measured quantity of Joe's wealth}}{\text{a measured quantity of Joe's wisdom}} = \text{model}\parens{\threevec{\text{a measured quantity of Joe's bedtime}}{\text{a measured quantity of Joe's waketime}}{\vdots}}
\eeqn
\normalsize

	
\end{frame}


\begin{frame}\frametitle{Updated Definition of Prediction}

\small 
Now we can hone our definition of prediction. For a 

\begin{itemize}
\item new or
\item heretofore unseen or
\item future
\end{itemize}

observation, where the inputs have been measured / assessed but the output has not been measured / assessed,

\beqn
\underbrace{\substack{\text{the \emph{guessed}} \\ \text{output} \\ \text{measurements}}}_{\text{prediction}} = \text{model}\parens{\substack{\text{the measured} \\ \text{inputs of an} \\ \text{observation}}}
\eeqn

\tiny 
\beqn
\threevec{\text{a guessed quantity of Bob's health}}{\text{a guessed quantity of Bob's wealth}}{\text{a guessed quantity Bob's wisdom}} = \text{model}\parens{\threevec{\text{a measured quantity of Bob's bedtime}}{\text{a measured quantity of Bob's waketime}}{\vdots}}
\eeqn
\normalsize

%square brackets denote vector notation with each element indicating a separate dimension.

\end{frame}


\begin{frame}\frametitle{Measurements as Variables}

Instead of \qu{a measured quantity ...} we can use algebraic \textit{variables} to denote the numerical quantities. It is traditional to use $x$'s to represent inputs and $y$'s to represent outputs. Here would be the relationship for Joe:


\beqn
\threevec{y_1}{y_2}{y_3} = \text{model}\parens{\threevec{x_1}{x_2}{\vdots}}
\eeqn

and for Bob:


\beqn
\threevec{\yhat_1}{\yhat_2}{\yhat_3} = \text{model}\parens{\threevec{x_1}{x_2}{\vdots}}
\eeqn

We will use the \qu{hat} symbol ($\hat{~}$) to indicate a prediction of the output $\yhat$ to distinguish it from a known value of the output $y$.

\end{frame}

\begin{frame}\frametitle{More Vocabulary}

\small
Even though measured inputs and outputs are features of an observation, they each go by special names that emphasize their roles. \\~\\

Each output $y$ is called a

\begin{itemize}
\item \textit{response} (the model \qu{responds} to inputs)
\item \textit{outcome} / \textit{outcome metric} (the result of inputs)
\item \sout{\textit{endpoint}} (only used in clinical trial context)
\end{itemize}

and they are the target of prediction --- what we want to ultimately predict. \\~\\

Inputs $x$'s then can go by the following terms of art:

\begin{itemize}
\item \textit{covariates} (because the vary with the response, co-vary)
\item \textit{predictors} (since they will be the inputs used to make predictions)
\end{itemize}

and they are what we make use of to predict. I will try to use \qu{response} and \qu{predictors} in this course.

\end{frame}


\begin{frame}\frametitle{Mathematical Model}

Now that we have predictors and responses measured an numeric and an equal sign relating them. We have officially created a \textit{mathematical model}. The word \qu{model} now will be represented as a function, $f$. So for an old observation,

\beqn
\threevec{y_1}{y_2}{y_3} = f\parens{x_1, x_2, \ldots} 
\eeqn

and for a new observation,

\beqn
\threevec{\yhat_1}{\yhat_2}{\yhat_3} = f\parens{x_1, x_2, \ldots} 
\eeqn

It is said that the \qu{model explains the response}. What does this mean?
	
\end{frame}

\begin{frame}\frametitle{Science is based on Mathematical Models}

We have become quite successful at shrink-wrapping interesting variables in the world around us

\beqn
F
\eeqn
	
\end{frame}


\begin{frame}\frametitle{Focus: models with univariate responses.}

Although general models have any number of outputs, this semester we will only consider models with one output. Thus, we will be looking at models such as

\begin{quotation}
Early to bed and early to rise makes a man healthy.
\end{quotation}

We picked the most interesting output. So, for an old observation,

\beqn
y = f\parens{x_1, x_2, \ldots} 
\eeqn

and a new observation,

\beqn
\yhat = f\parens{x_1, x_2, \ldots} 
\eeqn
	
\end{frame}
%%%http://medcitynews.com/2015/04/lack-sleep-amount-time-spent-working-correlate-rich-poor-suffer-unhealthy-pattern/



\begin{frame}\frametitle{Many possible models}

\small
\begin{quotation}
Early to bed and early to rise makes a man healthy.
\end{quotation}

What is the response metric? \pause What does \qu{healthy} mean?\\

\begin{itemize}
\item Healthy for his whole life? Unlikely the model means this...
\item Healthy for ages 25-65? Since we can expect health in infanthood and adolescence but not in elderly years
\end{itemize}

One also gets a feeling from the wording, there is either \qu{healthy} or \qu{not healthy}. Thus the response metric will be the \textit{categorical} data type and the model would be called a \textit{classification} model. \\\vspace{0.2cm}

Categorical measurements consist of discrete, mutually exclusive \textit{levels}. Here, \{healthy, not healthy\}. Generally, \{a, b, c, $\ldots$\}. Metrics with a large number of levels are difficult to model --- keep it low.\\\vspace{0.2cm}

I there are two levels, it is called \textit{binary} and the model would be called a \qu{binary response model} (or classification) with elements 0 and 1.
	
\end{frame}

\begin{frame}\frametitle{Define the response clearly}

Response: Healthy for ages 25--65 \\~\\

We still need a clear definition. Ideas? How about: healthy means no incidence of a \qu{major} disease between the ages of 25--65? This can be assessed with medical records. 
	
\end{frame}

\begin{frame}\frametitle{Define the predictors clearly}

$x_1$: bedtime schedule \\~\\

Definition? \pause Average bedtime. \pause How to measure / assess? Survey? \\~\\	

%Difficult... Other ideas? How about bedtimes for every single night from ages 25--65? 14,965 features. Bad idea...


$x_2$: waketime schedule \\~\\	

Definition? \pause Average time to rise in the morning assessed via survey\\~\\	

Thus, $x_1$ and $x_2$ are a variant of a \textit{timestamp} data type.

\end{frame}

\begin{frame}\frametitle{Dataframes}

\small
The historical \textit{data frame} or \textit{dataset} or even more colloquially, the \qu{data} looks like:

\begin{table}
\centering
\small
\begin{tabular}{ccc}
Healthy? 1 = yes ($y$) & Average Bedtime ($x_1$) & Average Waketime ($x_2$) \\ \hline
1 & 9:32PM & 6:42AM \\
0 & 11:55PM & 7:53AM \\
0 & 10:33PM & 7:02AM \\
\vdots
\end{tabular}
\end{table}

Dataframes have $n$ observations and $p$ predictors. Here $n = \pause 3$ (only those viewable above) and $p = 2$. Thus, it is a matrix with $n$ rows and $p + 1$ columns. The \qu{+1} is for the response which is not a predictor. \\

What would a new observation look like? Tony went to bed on average 9:53PM and awoke on average at 6:13AM. Did he have a healthy life or not?

We don't know the model yet...
	
\end{frame}

\begin{frame}\frametitle{Mathematical Models are Deterministic}

\small
\begin{quotation}
Early to bed and early to rise makes a man healthy.
\end{quotation}

which, after measuring inputs and outputs and mathematizing, becomes $y = f(x_1, x_2)$.\\

\begin{minipage}{0.4\textwidth}
\footnotesize
From the wording, it seems the model is unequivocal and deterministic. This means \pause that for any input values (the measured values of $x_1$ and $x_2$), the output (the response) will have only one unique value.\\
\vspace{0.2cm}
Thus the functional form likely looks like a \textit{decision tree model}.
\end{minipage}%
\begin{minipage}{0.6\textwidth}
\begin{figure}
\centering
\includegraphics[width=2in]{simple_health}
\end{figure}
\end{minipage}
	
\end{frame}

\begin{frame}\frametitle{Is the Model \textit{Really} Deterministic?}

This is an ancient question... it touches on the free will vs. determinism debate. We will punt on the philosophy and ask: is this model deterministic? \pause NO. \\~\\

Thus, this model is wrong. Why? We can find at least one person who does not have a matching response when inputs are evaluated in $f$. Seems obvious but...

\end{frame}

\begin{frame}\frametitle{Smoking and Lung Cancer}

\small
Consider the model with the binary input 

\begin{itemize}
\item[$y$:] contract lung cancer at some point (1) or not (0)
\item[$x_1$:] smoke 10 pack years or more at some point in a lifetime (1) or not (0) and the response 
\end{itemize}

Do you think the model should look like the below?\vspace{-0.2cm}

\begin{figure}
\centering
\includegraphics[width=1.4in]{smoking}
\end{figure}
\vspace{-0.2cm}
No... in fact \qu{only} 16\% of smokers get lung cancer compared to about 0.4\% of non-smokers. Thus, the simpel model above is wrong because some responses (that is features of certain individuals) will not \qu{fit} the model. Thus, should we throw out the whole enterprise of modeling?


%http://colinchamp.com/diet-studies-and-cancer/
\end{frame}

\begin{frame}\frametitle{Statistical Models}

Mathematical models such as

\beqn
y = f(x_1, x_2, \ldots)
\eeqn


	
\end{frame}

\begin{frame}\frametitle{}

	
\end{frame}

\begin{frame}\frametitle{}

	
\end{frame}

\begin{frame}\frametitle{}

	
\end{frame}

\begin{frame}\frametitle{}

	
\end{frame}

\begin{frame}\frametitle{}

	
\end{frame}

\begin{frame}\frametitle{}

	
\end{frame}

\begin{frame}\frametitle{}

	
\end{frame}

\begin{frame}\frametitle{}

	
\end{frame}

\begin{frame}\frametitle{}

	
\end{frame}

\begin{frame}\frametitle{}

	
\end{frame}

\begin{frame}\frametitle{}

	
\end{frame}

\begin{frame}\frametitle{}

	
\end{frame}

\begin{frame}\frametitle{}

	
\end{frame}

\begin{frame}\frametitle{}

	
\end{frame}

\begin{frame}\frametitle{}

	
\end{frame}

\begin{frame}\frametitle{}

	
\end{frame}

\begin{frame}\frametitle{}

	
\end{frame}

\begin{frame}\frametitle{}

	
\end{frame}

\begin{frame}\frametitle{}

	
\end{frame}

\begin{frame}\frametitle{}

	
\end{frame}

\end{document}


